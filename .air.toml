# .air.toml
################################################################################

root = "."
tmp_dir = "tmp"

[build]
  # Build the binary
  cmd = "templ generate && go build -o ./tmp/main ."
  # Run the compiled binary
  bin = "./tmp/main"
  # Full command with arguments (if needed)
  full_bin = "./tmp/main"
  # Include extensions
  include_ext = ["go", "templ"]
  # Exclude directories
  exclude_dir = ["tmp", "vendor", "node_modules", ".git", "static"]
  # Exclude auto-generated templ files (they're regenerated by templ generate)
  exclude_file = ["*_templ.go"]
  # Exclude specific patterns
  exclude_regex = ["_templ\\.go$"]
  # Include directories (explicit)
  include_dir = ["internal", "cmd"]
  # Delay before rebuilding (ms)
  delay = 1000
  # Stop old binary before starting new one
  stop_on_error = true
  # Send interrupt signal to stop
  send_interrupt = true
  # Wait time before killing process (ms)
  kill_delay = 500
  # Log file
  log = "tmp/air.log"
  # Rerun on crash
  rerun = true
  rerun_delay = 500

[log]
  time = true
  main_only = false

[color]
  main = "magenta"
  watcher = "cyan"
  build = "yellow"
  runner = "green"

[misc]
  clean_on_exit = true